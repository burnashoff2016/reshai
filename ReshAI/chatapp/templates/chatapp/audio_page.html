{% extends 'base_app.html' %}

{% block content %}
<main>
    <section class="chat-container">
        <div id="notification-container"></div>

        <aside class="subjects-menu">
            <h3>Загрузите видео-аудио и выберите предмет</h3>

            <div class="d-flex gap-2 justify-content-center py-2"id = "subjects-container">
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Математика')">Математика</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Физика')">Физика</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'История')">История</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Химия')">Химия</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Биология')">Биология</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Социология')">Социология</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Экономика')">Экономика</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Астрономия')">Астрономия</button>
                <button class="btn btn-secondary rounded-pill px-3" type="button" onclick="selectSubject(this, 'Философия')">Философия</button>
            </div>
        </aside>

        <input type="hidden" id="chat-id" value="{{ chat.id|default:'' }}">
        <div id="global-menu-container"></div>
         <div id="chat-box" class="chat-box">
            <div class="system-message">Выберите предмет, чтобы начать чат.</div>
        </div>

        <div class="chat-input-container">
            <textarea id="user-message" placeholder="Введите ваше сообщение..."></textarea>
            <button id="open-upload-modal" class="upload-trigger"><i class="fas fa-upload"></i></button>
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </section>
</main>
    {% endblock %}


    {% block modals %}
<div id="upload-modal" class="modal hidden">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Загрузите аудио</h3>
        <form id="upload-form" action="/page_one/" enctype="multipart/form-data" method="POST">
            {% csrf_token %}
            <input type="file" name="document" id="document" accept="audio/*,video/*" class="file-input">
            <button type="submit" class="upload-button">Загрузить</button>
        </form>
    </div>
</div>

{% endblock %}
